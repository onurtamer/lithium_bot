{$DOMAIN_NAME} {
    # Bypass Let's Encrypt Rate Limit using ZeroSSL
    tls {
        issuer zerossl
    }

    # API Routes (Strip /api prefix)
    handle_path /api/* {
        reverse_proxy api:8000
    }

    # API Documentation (Swagger UI)
    handle_path /docs* {
        reverse_proxy api:8000
    }
    
    # OpenAPI JSON
    handle_path /openapi.json {
        reverse_proxy api:8000
    }

    # Frontend (Next.js)
    handle {
        reverse_proxy web:3000
    }
}
